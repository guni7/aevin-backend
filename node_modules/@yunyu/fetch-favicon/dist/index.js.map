{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 774c364d4e5d1830b763","webpack:///./source/index.js","webpack:///external \"x-ray\"","webpack:///./source/config.js","webpack:///./source/markActiveFavicon.js","webpack:///external \"url\""],"names":["fetchFavicon","fetchFavicons","x","require","config","markActiveFavicon","default","Url","getFavicons","url","selectors","join","href","content","property","rel","name","sizes","emptyDataContents","isEmptyData","favicon","includes","isNotEmptyData","setFetchFaviconTimeout","ms","timeout","size","then","favicons","active","find","Promise","resolve","reject","err","push","filter","map","f","Math","min","apply","split","undefined","module","exports","predicates","s","minSize","i","result","length"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"x-ray\"), require(\"url\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"x-ray\", \"url\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"fetchFavicon\"] = factory(require(\"x-ray\"), require(\"url\"));\n\telse\n\t\troot[\"fetchFavicon\"] = factory(root[\"x-ray\"], root[\"url\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 774c364d4e5d1830b763","'use strict'\n\nconst x = require('x-ray')()\nconst config = require('./config')\nconst markActiveFavicon = require('./markActiveFavicon').default\nconst Url = require('url')\n\nfunction getFavicons (url) {\n  return x(url, config.selectors.join(), [{\n    href: '@href',\n    content: '@content',\n    property: '@property',\n    rel: '@rel',\n    name: '@name',\n    sizes: '@sizes'\n  }])\n}\n\nconst emptyDataContents = [\n  'data:/,',\n  'data:/'\n]\n\nfunction isEmptyData (favicon) {\n  if (favicon.href) return emptyDataContents.includes(favicon.href)\n  return emptyDataContents.includes(favicon.content)\n}\n\nfunction isNotEmptyData (favicon) {\n  return !isEmptyData(favicon)\n}\n\nfunction setFetchFaviconTimeout (ms) {\n  return x.timeout(ms)\n}\n\nexport { fetchFavicon as default, setFetchFaviconTimeout }\n\nexport\nfunction fetchFavicon (url, size) {\n  return fetchFavicons(url, size)\n  .then((favicons) => {\n    const active = favicons.find((favicon) => favicon.active)\n    return active.href\n  })\n}\n\nexport\nfunction fetchFavicons (url, size) {\n  return new Promise(function (resolve, reject) {\n    getFavicons(url)((err, favicons) => {\n      if (err) {\n        return reject(err)\n      }\n\n      favicons.push({\n        href: Url.resolve(url, 'favicon.ico'),\n        name: 'favicon.ico'\n      })\n\n      favicons = favicons.filter(isNotEmptyData).map((favicon) => {\n        const f = {\n          href: favicon.href || favicon.content,\n          name: favicon.name || favicon.rel || favicon.property,\n          size: Math.min.apply(null, (favicon.sizes || '').split(/[^0-9\\.]+/g)) || undefined\n        }\n\n        if (!f.size) {\n          delete f.size\n        }\n\n        return f\n      })\n\n      markActiveFavicon(favicons, size)\n      return resolve(favicons)\n    })\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./source/index.js","module.exports = require(\"x-ray\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"x-ray\"\n// module id = 1\n// module chunks = 0","'use strict'\n\nmodule.exports = {\n  selectors: [\n    // 'link[rel=apple-touch-icon-precomposed][href]',\n    // 'link[rel=apple-touch-icon][href]',\n    'link[rel=\"shortcut icon\"][href]',\n    'link[rel=icon][href]'\n    // 'meta[name=msapplication-TileImage][content]',\n    // 'meta[name=twitter\\\\:image][content]',\n    // 'meta[property=og\\\\:image][content]'\n  ],\n\n  predicates: [\n    // (f, s) => f.name === 'apple-touch-icon-precomposed' && f.size >= s,\n    // (f, s) => f.name === 'apple-touch-icon' && f.size >= s,\n    // (f, s) => f.name === 'twitter:image' && f.size >= s,\n    (f, s) => f.name === 'shortcut icon' && f.size >= s,\n    (f, s) => f.name === 'icon' && f.size >= s,\n    // (f, s) => f.name === 'og:image' && f.size >= s,\n    // (f, s) => f.name === 'msapplication-TileImage' && f.size >= s,\n\n    // (f, s) => f.name === 'apple-touch-icon-precomposed',\n    // (f, s) => f.name === 'apple-touch-icon',\n    // (f, s) => f.name === 'twitter:image',\n    (f, s) => f.name === 'shortcut icon',\n    (f, s) => f.name === 'icon',\n    // (f, s) => f.name === 'og:image',\n    // (f, s) => f.name === 'msapplication-TileImage',\n    (f, s) => f.name === 'favicon.ico'\n  ]\n}\n\n\n\n// WEBPACK FOOTER //\n// ./source/config.js","'use strict'\n\nimport config from './config'\n\nexport default\nfunction markActiveFavicon (favicons, minSize) {\n  for (let i = 0; i < config.predicates.length; i++) {\n    const result = favicons.find((favicon) => config.predicates[i](favicon, minSize))\n    if (result) {\n      result.active = true\n      break\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./source/markActiveFavicon.js","module.exports = require(\"url\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"url\"\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}